!function(a){"use strict";function b(a,b,c){var d,e,f,g,h,i=Number.MAX_VALUE;for(g=0,h=o.length;h>g;g++)d=Math.abs(c-o[g]),i>d&&(i=d,e=o[g],f=n[g]);return[e,f]}Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var c,d,e,f,g=1e3,h=60*g,i=60*h,j=24*i,k=7*j,l=30.4368499*j,m=365.242199*j,n=["%M:%S.%#N","%M:%S.%#N","%M:%S.%#N","%M:%S","%M:%S","%M:%S","%M:%S","%H:%M:%S","%H:%M:%S","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%a %H:%M","%a %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%v","%v","%v","%v","%v","%v","%v"],o=[.1*g,.2*g,.5*g,g,2*g,5*g,10*g,15*g,30*g,h,2*h,5*h,10*h,15*h,30*h,i,2*i,4*i,6*i,8*i,12*i,j,2*j,3*j,4*j,5*j,k,2*k];c=function(b){var c,d,e,f=!0,g=new Date;for(c=0;c<b.length;c++)d=b[c],e=new this.tickRenderer(this.tickOptions),d.constructor===Array?(e.value=new a.jsDate(d[0]).getTime(),e.label=d[1],this.showTicks?this.showTickMarks||(e.showMark=!1):(e.showLabel=!1,e.showMark=!1),"%H:%M"===this.tickOptions.formatString&&this.tickOptions.labelFullHoursOnly&&(g.setTime(e.value),f=0===g.getMinutes()?!1:!0),e.setTick(e.value,this.name,f),this._ticks.push(e)):(e.value=new a.jsDate(d).getTime(),this.showTicks?this.showTickMarks||(e.showMark=!1):(e.showLabel=!1,e.showMark=!1),"%H:%M"===this.tickOptions.formatString&&this.tickOptions.labelFullHoursOnly&&(g.setTime(e.value),f=0===g.getMinutes()?!1:!0),e.setTick(e.value,this.name,f),this._ticks.push(e));this.numberTicks=b.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value,this.daTickInterval=[(this.max-this.min)/(this.numberTicks-1)/1e3,"seconds"]},d=function(b){var c,d,e,f;for(c=a.extend(!0,{},this.tickOptions,{name:this.name,value:null}),d=3e5,this.min=b.min-d,this.max=b.max+d,this.numberTicks=3,e=this.min;e<=this.max;e+=d)c.value=e,f=new this.tickRenderer(c),this._overrideFormatString&&""!==this._autoFormatString&&(f.formatString=this._autoFormatString),f.showLabel=!1,f.showMark=!1,this._ticks.push(f);this.showTicks&&(this._ticks[1].showLabel=!0),this.showTickMarks&&(this._ticks[1].showTickMarks=!0)},e=function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=this.name;for(e="xaxis"===p||"x2axis"===p?this._plotDimensions.width:this._plotDimensions.height,null!==this.min&&null!==this.max&&null!==this.numberTicks&&(this.tickInterval=null),null!==this.tickInterval&&null!==b&&(this.daTickInterval=b),c===d&&(o=432e5,c-=o,d+=o),f=d-c,g=2+parseInt(Math.max(0,e-100)/100,10),h=null!==this.min?new a.jsDate(this.min).getTime():c-f/2*(this.padMin-1),i=null!==this.max?new a.jsDate(this.max).getTime():d+f/2*(this.padMax-1),this.min=h,this.max=i,f=this.max-this.min,null===this.numberTicks&&(null!==this.daTickInterval?(j=new a.jsDate(this.max).diff(this.min,this.daTickInterval[1],!0),this.numberTicks=Math.ceil(j/this.daTickInterval[0])+1,this.max=new a.jsDate(this.min).add((this.numberTicks-1)*this.daTickInterval[0],this.daTickInterval[1]).getTime()):e>200?this.numberTicks=parseInt(3+(e-200)/100,10):this.numberTicks=2),k=f/(this.numberTicks-1)/1e3,null===this.daTickInterval&&(this.daTickInterval=[k,"seconds"]),l=0;l<this.numberTicks;l++)c=new a.jsDate(this.min),n=c.add(l*this.daTickInterval[0],this.daTickInterval[1]).getTime(),m=new this.tickRenderer(this.tickOptions),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(n,this.name),this._ticks.push(m);return k},f=function(c,d,e,f){var g,h,i,k,n,o,p,q,r,s,t,u,v,w,x,y=a.extend(!0,{},this.tickOptions,{name:this.name,value:null}),z="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height;if(this.tickInterval||this.numberTicks?this.tickInterval?i=new a.jsDate(0).add(f[0],f[1]).getTime():this.numberTicks&&(h=this.numberTicks,i=(e-d)/(h-1)):(k=Math.max(z,c+1),n=115,this.tickRenderer===a.jqplot.CanvasAxisTickRenderer&&this.tickOptions.angle&&(n=115-40*Math.abs(Math.sin(this.tickOptions.angle/180*Math.PI))),h=Math.ceil((k-c)/n+1),i=(e-d)/(h-1)),19*j>=i){for(o=b(d,e,i),p=o[0],this._autoFormatString=o[1],d=new a.jsDate(d),d=Math.floor((d.getTime()-d.getUtcOffset())/p)*p+d.getUtcOffset(),h=Math.ceil((e-d)/p)+1,this.min=d,this.max=d+(h-1)*p,this.max<e&&(this.max+=p,h+=1),this.tickInterval=p,this.numberTicks=h,q=0;h>q;q++)y.value=this.min+q*p,r=new this.tickRenderer(y),this._overrideFormatString&&""!==this._autoFormatString&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),this._ticks.push(r);g=this.tickInterval}else if(9*l>=i){for(this._autoFormatString="%v",s=Math.round(i/l),1>s?s=1:s>6&&(s=6),t=new a.jsDate(d).setDate(1).setHours(0,0,0,0),u=new a.jsDate(e),v=new a.jsDate(e).setDate(1).setHours(0,0,0,0),u.getTime()!==v.getTime()&&(v=v.add(1,"month")),w=v.diff(t,"month"),h=Math.ceil(w/s)+1,this.min=t.getTime(),this.max=t.clone().add((h-1)*s,"month").getTime(),this.numberTicks=h,q=0;h>q;q++)0===q?y.value=t.getTime():y.value=t.add(s,"month").getTime(),r=new this.tickRenderer(y),this._overrideFormatString&&""!==this._autoFormatString&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),this._ticks.push(r);g=s*l}else{for(this._autoFormatString="%v",s=Math.round(i/m),1>s&&(s=1),t=new a.jsDate(d).setMonth(0,1).setHours(0,0,0,0),v=new a.jsDate(e).add(1,"year").setMonth(0,1).setHours(0,0,0,0),x=v.diff(t,"year"),h=Math.ceil(x/s)+1,this.min=t.getTime(),this.max=t.clone().add((h-1)*s,"year").getTime(),this.numberTicks=h,q=0;h>q;q++)0===q?y.value=t.getTime():y.value=t.add(s,"year").getTime(),r=new this.tickRenderer(y),this._overrideFormatString&&""!==this._autoFormatString&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),this._ticks.push(r);g=s*m}return g},a.jqplot.DateAxisRenderer=function(){a.jqplot.LinearAxisRenderer.call(this),this.date=new a.jsDate},a.jqplot.DateAxisRenderer.prototype=new a.jqplot.LinearAxisRenderer,a.jqplot.DateAxisRenderer.prototype.constructor=a.jqplot.DateAxisRenderer,a.jqplot.DateTickFormatter=function(a){this.typeFormatter=a},a.jqplot.DateTickFormatter.prototype.format=function(b,c){return b||(b="%Y/%m/%d"),a.jsDate.strftime(c,b,this.typeFormatter)},a.jqplot.DateAxisRenderer.prototype.init=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=this._dataBounds,r=function(a,b){return b.frequency-a.frequency};for(this.tickOptions.typeFormatter=this.tickOptions.typeFormatter||"perl",this.tickOptions.formatter=new a.jqplot.DateTickFormatter(this.tickOptions.typeFormatter).format,this.tickOptions.labelFullHoursOnly="undefined"!=typeof this.tickOptions.labelFullHoursOnly?this.tickOptions.labelFullHoursOnly:!1,this.tickInset=0,this.drawBaseline=!0,this.baselineWidth=null,this.baselineColor=null,this.daTickInterval=null,this._daTickInterval=null,a.extend(!0,this,b),j=0;j<this._series.length;j++){for(c={intervals:[],frequencies:{},sortedIntervals:[],min:null,max:null,mean:null},d=0,e=this._series[j],f=e.data,g=e._plotData,h=e._stackData,i=0,k=0;k<f.length;k++)"xaxis"===this.name||"x2axis"===this.name?(f[k][0]=new a.jsDate(f[k][0]).getTime(),g[k][0]=new a.jsDate(f[k][0]).getTime(),h[k][0]=new a.jsDate(f[k][0]).getTime(),(null!==f[k][0]&&f[k][0]<q.min||null===q.min)&&(q.min=f[k][0]),(null!==f[k][0]&&f[k][0]>q.max||null===q.max)&&(q.max=f[k][0]),k>0&&(i=Math.abs(f[k][0]-f[k-1][0]),c.intervals.push(i),c.frequencies.hasOwnProperty(i)?c.frequencies[i]+=1:c.frequencies[i]=1),d+=i):(f[k][1]=new a.jsDate(f[k][1]).getTime(),g[k][1]=new a.jsDate(f[k][1]).getTime(),h[k][1]=new a.jsDate(f[k][1]).getTime(),(null!==f[k][1]&&f[k][1]<q.min||null===q.min)&&(q.min=f[k][1]),(null!==f[k][1]&&f[k][1]>q.max||null===q.max)&&(q.max=f[k][1]),k>0&&(i=Math.abs(f[k][1]-f[k-1][1]),c.intervals.push(i),c.frequencies.hasOwnProperty(i)?c.frequencies[i]+=1:c.frequencies[i]=1)),d+=i;if(e.renderer.bands){if(e.renderer.bands.hiData.length)for(m=e.renderer.bands.hiData,k=0,l=m.length;l>k;k++)"xaxis"===this.name||"x2axis"===this.name?(m[k][0]=new a.jsDate(m[k][0]).getTime(),(null!==m[k][0]&&m[k][0]>q.max||null===q.max)&&(q.max=m[k][0])):(m[k][1]=new a.jsDate(m[k][1]).getTime(),(null!==m[k][1]&&m[k][1]>q.max||null===q.max)&&(q.max=m[k][1]));if(e.renderer.bands.lowData.length)for(m=e.renderer.bands.lowData,k=0,l=m.length;l>k;k++)"xaxis"===this.name||"x2axis"===this.name?(m[k][0]=new a.jsDate(m[k][0]).getTime(),(null!==m[k][0]&&m[k][0]<q.min||null===q.min)&&(q.min=m[k][0])):(m[k][1]=new a.jsDate(m[k][1]).getTime(),(null!==m[k][1]&&m[k][1]<q.min||null===q.min)&&(q.min=m[k][1]))}n=0,o=0;for(p in c.frequencies)c.frequencies.hasOwnProperty(p)&&c.sortedIntervals.push({interval:p,frequency:c.frequencies[p]});c.sortedIntervals.sort(r),c.min=a.jqplot.arrayMin(c.intervals),c.max=a.jqplot.arrayMax(c.intervals),c.mean=d/f.length,this._intervalStats.push(c),c=d=e=f=g=h=null}q=null},a.jqplot.DateAxisRenderer.prototype.reset=function(){this.min=this._options.min,this.max=this._options.max,this.tickInterval=this._options.tickInterval,this.numberTicks=this._options.numberTicks,this._autoFormatString="",this._overrideFormatString&&this.tickOptions&&this.tickOptions.formatString&&(this.tickOptions.formatString=""),this.daTickInterval=this._daTickInterval},a.jqplot.DateAxisRenderer.prototype.createTicks=function(b){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=null;g=this._ticks,h=this.ticks,i=this.name,j=this._dataBounds,k=this._intervalStats,l="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height,o=30,p=1,q=null,null!==this.tickInterval&&(Number(this.tickInterval)?q=[Number(this.tickInterval),"seconds"]:"string"==typeof this.tickInterval&&(r=this.tickInterval.split(" "),1===r.length?q=[1,r[0]]:2===r.length&&(q=[r[0],r[1]]))),s=this.tickInterval,m=new a.jsDate(null!==this.min?this.min:j.min).getTime(),n=new a.jsDate(null!==this.max?this.max:j.max).getTime(),t=b.plugins.cursor,t&&t._zoom&&t._zoom.zooming&&(this.min=null,this.max=null),u=n-m,null!==this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),h.length?(v=c.bind(this))(h):null===this.min&&null===this.max&&j.min===j.max?(v=d.bind(this))(j):null===this.min&&null===this.max?(v=f.bind(this),p=v(o,m,n,q)):(v=e.bind(this),p=v(q,m,n)),this.tickInset&&(this.min=this.min-this.tickInset*p,this.max=this.max+this.tickInset*p),null===this._daTickInterval&&(this._daTickInterval=this.daTickInterval),g=null}}(jQuery);